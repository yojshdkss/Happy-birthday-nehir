<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Nehir</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #0a0a0a;
            font-family: 'Poppins', sans-serif;
            color: white;
        }

        /* Countdown Styles */
        #countdown-container {
            position: fixed;
            inset: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
        }

        .number {
            font-size: 10rem;
            font-weight: 800;
            color: #ffcc00;
            text-shadow: 0 0 30px rgba(255, 204, 0, 0.5);
            opacity: 0;
            position: absolute;
            transform: scale(0.5);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .number.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Fireworks Canvas */
        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
        }

        /* Envelope / Card Styles */
        #envelope-wrapper {
            position: fixed;
            inset: 0;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 50;
            perspective: 1000px;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            background: #d44;
            cursor: pointer;
            transition: transform 0.5s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .envelope::before {
            content: "";
            position: absolute;
            top: 0;
            z-index: 2;
            border-top: 110px solid #f55;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            transform-origin: top;
            transition: transform 0.4s 0.2s;
        }

        .envelope.open::before {
            transform: rotateX(180deg);
            z-index: 0;
        }

        .envelope::after {
            content: "";
            position: absolute;
            z-index: 1;
            border-top: 100px solid transparent;
            border-left: 150px solid #d44;
            border-right: 150px solid #d44;
            border-bottom: 100px solid #c33;
            bottom: 0;
        }

        .card {
            position: absolute;
            bottom: 5px;
            left: 10px;
            width: 280px;
            height: 180px;
            background: white;
            z-index: 1;
            transition: all 0.8s ease-in-out;
            padding: 25px 20px;
            color: #333;
            border-radius: 5px;
            box-sizing: border-box;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            scrollbar-width: none; /* Firefox */
        }

        .card::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }

        .envelope.open .card {
            /* Corregido: Usamos transform proporcional para que no se salga de la pantalla */
            transform: translateY(-65%) scale(1.1);
            height: 420px;
            max-height: 75vh;
            z-index: 10;
            width: 320px;
            left: -10px;
            box-shadow: 0 15px 45px rgba(0,0,0,0.4);
        }

        .card h2 {
            font-family: 'Dancing Script', cursive;
            color: #e63946;
            font-size: 1.8rem;
            margin-bottom: 15px;
            flex-shrink: 0;
        }

        .card p {
            font-size: 0.85rem;
            line-height: 1.6;
            margin-bottom: 15px;
            color: #444;
        }

        /* Pixel Daisy */
        .daisy-container {
            width: 50px;
            height: 50px;
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            margin-bottom: 10px;
            flex-shrink: 0;
        }

        .pixel {
            width: 100%;
            aspect-ratio: 1;
        }

        .w { background: white; }
        .y { background: #ffd700; }
        .g { background: #2d6a4f; }
        .x { background: transparent; }

        .click-me {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            background: white;
            color: #d44;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255,255,255,0.3);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        #bg-text {
            position: fixed;
            bottom: 20px;
            width: 100%;
            text-align: center;
            color: rgba(255,255,255,0.15);
            font-size: 0.7rem;
            letter-spacing: 3px;
        }
    </style>
</head>
<body>

    <div id="countdown-container">
        <div id="num-3" class="number">3</div>
        <div id="num-2" class="number">2</div>
        <div id="num-1" class="number">1</div>
        <div id="num-0" class="number">0</div>
    </div>

    <canvas id="canvas"></canvas>

    <div id="envelope-wrapper">
        <div class="envelope" id="envelope">
            <div class="click-me">OPEN ME</div>
            <div class="card">
                <div class="daisy-container" id="daisy"></div>
                <h2>Happy Birthday, Nehir!</h2>
                
                <p>Hi! I hope you‚Äôre having an amazing day. I took the time to put this little space together to reach out because today is a special date.</p>
                
                <p>It‚Äôs been five years since we first met, and even though life has taken us in different directions and we both have our own lives now, there are people who will always hold a place of respect in my memory. I didn't want this day to pass by like any other; it's always a pleasure for me to know that you‚Äôre doing well and moving forward in everything you set your mind to.</p>
                
                <p>From the bottom of my heart, I wish for this new year of life to be filled with fulfillment, for you to reach every goal you have in mind, and for any challenges to only make you stronger. You deserve for nothing but good things to happen to you, today and always.</p>
                
                <p>Enjoy your celebration to the fullest, laugh a lot, and may this year undoubtedly be your best one yet. Sending you a big hug!</p>

                <p class="font-bold text-pink-600 text-lg">Happy Birthday üéâüç∞</p>
            </div>
        </div>
    </div>

    <div id="bg-text">CELEBRATING FIVE YEARS OF KNOWING YOU</div>

    <script>
        // --- Pixel Daisy ---
        const daisyPattern = [
            'x','x','w','w','w','x','x','x',
            'x','w','w','y','w','w','x','x',
            'w','w','y','y','y','w','w','x',
            'w','y','y','y','y','y','w','x',
            'w','w','y','y','y','w','w','x',
            'x','w','w','y','w','w','x','x',
            'x','x','g','g','g','x','x','x',
            'x','x','x','g','x','x','x','x'
        ];

        const daisyEl = document.getElementById('daisy');
        daisyPattern.forEach(pixel => {
            const div = document.createElement('div');
            div.className = `pixel ${pixel}`;
            daisyEl.appendChild(div);
        });

        // --- Fireworks Logic ---
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = { x: (Math.random() - 0.5) * 8, y: (Math.random() - 0.5) * 8 };
                this.alpha = 1;
                this.friction = 0.95;
                this.gravity = 0.15;
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.restore();
            }
            update() {
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= 0.01;
            }
        }

        function createFirework(x, y) {
            const colors = ['#ff0040', '#00ffcc', '#ffcc00', '#ff00ff', '#ffffff'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < 50; i++) particles.push(new Particle(x, y, color));
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => {
                if (p.alpha > 0) { p.update(); p.draw(); }
                else { particles.splice(i, 1); }
            });
            requestAnimationFrame(animate);
        }

        // --- Sequence ---
        const countdown = async () => {
            const nums = ['3', '2', '1', '0'];
            for (let n of nums) {
                const el = document.getElementById(`num-${n}`);
                el.classList.add('active');
                await new Promise(r => setTimeout(r, 1000));
                el.classList.remove('active');
            }
            document.getElementById('countdown-container').style.display = 'none';
            animate();
            for(let i=0; i<12; i++) {
                setTimeout(() => createFirework(Math.random()*canvas.width, Math.random()*canvas.height*0.5), i*250);
            }
            setTimeout(() => {
                const wrapper = document.getElementById('envelope-wrapper');
                wrapper.style.display = 'flex';
                setTimeout(() => wrapper.style.opacity = '1', 100);
            }, 1000);
        };

        const envelope = document.getElementById('envelope');
        envelope.addEventListener('click', () => {
            envelope.classList.toggle('open');
            const clickMe = envelope.querySelector('.click-me');
            if (clickMe) clickMe.style.display = 'none';
            if(envelope.classList.contains('open')) {
                setInterval(() => createFirework(Math.random()*canvas.width, Math.random()*canvas.height), 1500);
            }
        });

        window.onload = countdown;
    </script>
</body>
</html>
